# ⚡ 快速测试指南

## 🎯 目标
查看应用程序的完整启动日志，诊断 TLS 初始化问题

## ✅ 已完成的修改

1. ✅ **启用控制台输出**（修改了 CMakeLists.txt）
2. ✅ **增强 SSL/TLS 诊断**（修改了 main.cpp）
3. ✅ **添加调试脚本**（新增 run_with_log.bat）
4. ✅ **改进 DLL 打包**（修改了 build-windows.yml）

## 🚀 立即执行（3 步）

### 步骤 1: 提交并推送
```bash
git add .
git commit -m "启用控制台输出和增强 SSL 诊断"
git push
```

### 步骤 2: 下载新版本
1. 访问 GitHub Actions 页面
2. 等待构建完成（约 5-10 分钟）
3. 下载 `DataUploadTool-windows.zip`
4. 解压到任意目录

### 步骤 3: 运行并查看日志
```
解压后的文件：
📁 DataUploadTool/
  ├── DataUploadTool.exe      ← 主程序
  ├── run_with_log.bat         ← 调试脚本（推荐使用）
  ├── libcrypto-1_1.dll        ← OpenSSL DLL
  ├── libssl-1_1.dll           ← OpenSSL DLL
  ├── libcrypto-1_1-x64.dll    ← OpenSSL DLL (x64)
  ├── libssl-1_1-x64.dll       ← OpenSSL DLL (x64)
  └── ... 其他 Qt DLL
```

**双击运行 `run_with_log.bat`** 或 **双击 `DataUploadTool.exe`**

## 📊 预期看到的日志

### ✅ 成功的情况：
```
========================================
预加载 OpenSSL DLL
========================================
应用程序目录: C:\...\DataUploadTool
✓ 成功加载: libcrypto-1_1.dll
✓ 成功加载: libssl-1_1.dll
预加载结果: libcrypto = 成功, libssl = 成功

========================================
SSL/TLS 配置检查
========================================
Qt 版本: 5.12.12
SSL 支持: ✓ 是
SSL 运行时版本: OpenSSL 1.1.1u
SSL 编译版本: OpenSSL 1.1.1u
OpenSSL DLL 文件:
  libcrypto-1_1.dll: ✓ 存在
    路径: C:\...\libcrypto-1_1.dll
    大小: 3145728 字节
  libssl-1_1.dll: ✓ 存在
    路径: C:\...\libssl-1_1.dll
    大小: 679936 字节
========================================
```

### ❌ 失败的情况（需要报告）：
```
========================================
预加载 OpenSSL DLL
========================================
应用程序目录: C:\...\DataUploadTool
✗ 文件不存在: libcrypto-1_1.dll
✗ 文件不存在: libssl-1_1.dll
预加载结果: libcrypto = 失败, libssl = 失败
```

或者：
```
✓ 成功加载: libcrypto-1_1.dll
✓ 成功加载: libssl-1_1.dll
但是：
SSL 支持: ✗ 否
```

## 📝 需要提供的信息

### 如果看到日志：
1. **复制完整的控制台输出**
   - 右键控制台窗口 → 全选 → 按 Enter 复制
   - 或者截图整个控制台窗口

2. **测试上传功能**
   - 输入数据
   - 点击上传按钮
   - 复制上传时的错误信息

### 如果看不到日志：
说明控制台仍未显示，请提供：
- 是否看到两个窗口（控制台 + GUI）？
- 只看到 GUI 窗口？
- 还是其他情况？

## 🔍 常见问题

### Q1: 控制台一闪而过
A: 使用 `run_with_log.bat` 脚本运行，它会在程序退出后暂停

### Q2: 看不到中文
A: 正常，qDebug() 的中文可能显示为乱码，关键是看符号（✓/✗）和英文部分

### Q3: 窗口太小，看不全
A: 可以调整控制台窗口大小，或者右键复制所有文本

## 📞 反馈格式

请按以下格式提供信息：

```
【启动日志】
（粘贴完整的控制台输出）

【上传错误】
（粘贴上传时的错误信息）

【观察到的现象】
- 是否看到控制台窗口？
- SSL 支持状态？
- DLL 文件是否都存在？
```

---

**🎯 记住：完整的日志是解决问题的关键！**

